// SPDX-License-Identifier: GPL-2.0+
/*
 * Sunplus SP7350 SoC DRM CRTCs
 *
 * Author: dx.jiang<dx.jiang@sunmedia.com.cn>
 *         hammer.hsieh<hammer.hsieh@sunplus.com>
 */

#include <linux/component.h>
#include <linux/of_device.h>
#include <linux/clk.h>
#include <linux/reset.h>

#include <drm/drm_atomic.h>
#include <drm/drm_atomic_helper.h>
#include <drm/drm_atomic_uapi.h>
#include <drm/drm_fb_cma_helper.h>
#include <drm/drm_print.h>
#include <drm/drm_probe_helper.h>
#include <drm/drm_vblank.h>

#include "sp7350_drm_drv.h"
#include "sp7350_drm_crtc.h"
#include "sp7350_drm_plane.h"
#include "sp7350_drm_regs.h"

#define SP7350_CRTC_READ(offset) readl(sp_crtc->regs + (offset))
#define SP7350_CRTC_WRITE(offset, val) writel(val, sp_crtc->regs + (offset))

/*
 * SP7350 DISPLAY IMGREAD: Video Imgage Read
 */
static const struct debugfs_reg32 crtc_regs_g185[] = {
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_00),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_01),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_02),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_03),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_04),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_05),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_06),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_07),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_08),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_09),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_10),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_11),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_12),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_13),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_14),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_15),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_16),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_17),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_18),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_19),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_20),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_21),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_22),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_23),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_24),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_25),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_26),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_27),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_28),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_29),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_30),
	SP7350_DRM_REG32(SP7350_DISP_IMGREAD_G185_31),
};

/*
 * SP7350 DISPLAY VSCL0_G0: Video Scaler Group 0
 */
static const struct debugfs_reg32 crtc_regs_g186[] = {
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_00),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_01),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_02),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_03),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_04),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_05),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_06),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_07),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_08),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_09),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_10),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_11),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_12),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_13),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_14),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_15),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_16),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_17),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_18),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_19),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_20),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_21),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_22),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_23),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_24),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_25),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_26),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_27),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_28),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_29),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_30),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G0_G186_31),
};

/*
 * SP7350 DISPLAY VSCL0_G1: Video Scaler Group 1
 */
static const struct debugfs_reg32 crtc_regs_g187[] = {
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_00),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_01),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_02),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_03),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_04),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_05),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_06),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_07),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_08),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_09),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_10),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_11),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_12),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_13),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_14),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_15),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_16),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_17),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_18),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_19),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_20),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_21),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_22),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_23),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_24),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_25),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_26),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_27),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_28),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_29),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_30),
	SP7350_DRM_REG32(SP7350_DISP_VSCL0_G1_G187_31),
};

/*
 * SP7350 DISPLAY VPOST0: Video Post Processor
 */
static const struct debugfs_reg32 crtc_regs_g188[] = {
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_00),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_01),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_02),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_03),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_04),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_05),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_06),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_07),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_08),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_09),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_10),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_11),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_12),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_13),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_14),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_15),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_16),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_17),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_18),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_19),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_20),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_21),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_22),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_23),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_24),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_25),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_26),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_27),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_28),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_29),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_30),
	SP7350_DRM_REG32(SP7350_DISP_VPOST0_G188_31),
};

/*
 * SP7350 DISPLAY OSD0: On Screen Dsiplay Layer0
 */
static const struct debugfs_reg32 crtc_regs_g189[] = {
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_00),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_01),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_02),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_03),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_04),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_05),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_06),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_07),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_08),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_09),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_10),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_11),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_12),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_13),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_14),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_15),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_16),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_17),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_18),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_19),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_20),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_21),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_22),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_23),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_24),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_25),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_26),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_27),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_28),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_29),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_30),
	SP7350_DRM_REG32(SP7350_DISP_OSD0_G189_31),
};

/*
 * SP7350 DISPLAY OSD1: On Screen Dsiplay Layer1
 */
static const struct debugfs_reg32 crtc_regs_g190[] = {
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_00),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_01),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_02),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_03),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_04),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_05),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_06),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_07),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_08),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_09),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_10),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_11),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_12),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_13),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_14),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_15),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_16),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_17),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_18),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_19),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_20),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_21),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_22),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_23),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_24),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_25),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_26),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_27),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_28),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_29),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_30),
	SP7350_DRM_REG32(SP7350_DISP_OSD1_G190_31),
};

/*
 * SP7350 DISPLAY OSD2: On Screen Dsiplay Layer2
 */
static const struct debugfs_reg32 crtc_regs_g191[] = {
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_00),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_01),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_02),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_03),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_04),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_05),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_06),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_07),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_08),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_09),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_10),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_11),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_12),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_13),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_14),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_15),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_16),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_17),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_18),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_19),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_20),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_21),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_22),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_23),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_24),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_25),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_26),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_27),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_28),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_29),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_30),
	SP7350_DRM_REG32(SP7350_DISP_OSD2_G191_31),
};

/*
 * SP7350 DISPLAY OSD3: On Screen Dsiplay Layer3
 */
static const struct debugfs_reg32 crtc_regs_g192[] = {
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_00),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_01),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_02),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_03),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_04),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_05),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_06),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_07),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_08),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_09),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_10),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_11),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_12),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_13),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_14),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_15),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_16),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_17),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_18),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_19),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_20),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_21),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_22),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_23),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_24),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_25),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_26),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_27),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_28),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_29),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_30),
	SP7350_DRM_REG32(SP7350_DISP_OSD3_G192_31),
};

/*
 * SP7350 DISPLAY GPOST0: Graphic Post Processor for OSD0
 */
static const struct debugfs_reg32 crtc_regs_g193[] = {
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_00),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_01),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_02),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_03),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_04),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_05),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_06),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_07),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_08),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_09),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_10),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_11),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_12),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_13),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_14),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_15),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_16),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_17),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_18),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_19),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_20),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_21),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_22),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_23),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_24),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_25),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_26),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_27),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_28),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_29),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_30),
	SP7350_DRM_REG32(SP7350_DISP_GPOST0_G193_31),
};

/*
 * SP7350 DISPLAY GPOST1: Graphic Post Processor for OSD1
 */
static const struct debugfs_reg32 crtc_regs_g194[] = {
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_00),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_01),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_02),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_03),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_04),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_05),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_06),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_07),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_08),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_09),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_10),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_11),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_12),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_13),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_14),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_15),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_16),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_17),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_18),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_19),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_20),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_21),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_22),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_23),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_24),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_25),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_26),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_27),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_28),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_29),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_30),
	SP7350_DRM_REG32(SP7350_DISP_GPOST1_G194_31),
};

/*
 * SP7350 DISPLAY GPOST2: Graphic Post Processor for OSD2
 */
static const struct debugfs_reg32 crtc_regs_g195[] = {
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_00),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_01),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_02),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_03),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_04),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_05),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_06),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_07),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_08),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_09),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_10),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_11),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_12),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_13),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_14),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_15),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_16),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_17),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_18),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_19),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_20),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_21),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_22),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_23),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_24),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_25),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_26),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_27),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_28),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_29),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_30),
	SP7350_DRM_REG32(SP7350_DISP_GPOST2_G195_31),
};

/*
 * SP7350 DISPLAY GPOST3: Graphic Post Processor for OSD3
 */
static const struct debugfs_reg32 crtc_regs_g196[] = {
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_00),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_01),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_02),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_03),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_04),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_05),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_06),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_07),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_08),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_09),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_10),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_11),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_12),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_13),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_14),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_15),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_16),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_17),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_18),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_19),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_20),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_21),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_22),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_23),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_24),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_25),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_26),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_27),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_28),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_29),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_30),
	SP7350_DRM_REG32(SP7350_DISP_GPOST3_G196_31),
};

/*
 * SP7350 DISPLAY TGEN: Timing Generator
 */
static const struct debugfs_reg32 crtc_regs_g197[] = {
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_00),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_01),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_02),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_03),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_04),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_05),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_06),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_07),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_08),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_09),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_10),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_11),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_12),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_13),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_14),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_15),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_16),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_17),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_18),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_19),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_20),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_21),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_22),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_23),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_24),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_25),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_26),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_27),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_28),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_29),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_30),
	SP7350_DRM_REG32(SP7350_DISP_TGEN_G197_31),
};

/*
 * SP7350 DISPLAY DMIX0: Display Mixer
 */
static const struct debugfs_reg32 crtc_regs_g198[] = {
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_00),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_01),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_02),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_03),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_04),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_05),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_06),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_07),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_08),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_09),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_10),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_11),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_12),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_13),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_14),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_15),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_16),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_17),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_18),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_19),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_20),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_21),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_22),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_23),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_24),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_25),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_26),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_27),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_28),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_29),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_30),
	SP7350_DRM_REG32(SP7350_DISP_DMIX0_G198_31),
};

/*
 * SP7350 DISPLAY TCON: Timing Control PART1
 */
static const struct debugfs_reg32 crtc_regs_g199[] = {
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_00),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_01),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_02),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_03),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_04),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_05),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_06),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_07),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_08),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_09),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_10),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_11),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_12),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_13),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_14),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_15),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_16),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_17),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_18),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_19),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_20),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_21),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_22),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_23),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_24),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_25),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_26),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_27),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_28),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_29),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_30),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G199_31),
};

/*
 * SP7350 DISPLAY TCON: Timing Control PART2
 */
static const struct debugfs_reg32 crtc_regs_g200[] = {
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_00),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_01),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_02),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_03),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_04),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_05),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_06),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_07),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_08),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_09),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_10),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_11),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_12),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_13),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_14),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_15),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_16),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_17),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_18),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_19),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_20),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_21),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_22),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_23),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_24),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_25),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_26),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_27),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_28),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_29),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_30),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G200_31),
};

/*
 * SP7350 DISPLAY TCON: Timing Control PART3
 */
static const struct debugfs_reg32 crtc_regs_g201[] = {
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_00),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_01),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_02),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_03),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_04),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_05),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_06),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_07),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_08),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_09),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_10),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_11),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_12),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_13),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_14),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_15),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_16),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_17),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_18),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_19),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_20),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_21),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_22),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_23),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_24),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_25),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_26),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_27),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_28),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_29),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_30),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G201_31),
};

/*
 * SP7350 DISPLAY TCON: Timing Control (RESERVED)
 */
static const struct debugfs_reg32 crtc_regs_g202[] = {
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_00), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_01), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_02), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_03), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_04), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_05), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_06), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_07), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_08), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_09), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_10), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_11), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_12), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_13), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_14), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_15), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_16), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_17), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_18), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_19), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_20), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_21), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_22), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_23), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_24), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_25), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_26), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_27), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_28), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_29), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_30), /* reserved */
	SP7350_DRM_REG32(SP7350_DISP_TCON_G202_31), /* reserved */
};

/*
 * SP7350 DISPLAY TCON: Timing Control PART4
 */
static const struct debugfs_reg32 crtc_regs_g203[] = {
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_00),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_01),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_02),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_03),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_04),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_05),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_06),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_07),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_08),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_09),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_10),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_11),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_12),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_13),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_14),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_15),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_16),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_17),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_18),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_19),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_20),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_21),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_22),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_23),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_24),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_25),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_26),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_27),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_28),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_29),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_30),
	SP7350_DRM_REG32(SP7350_DISP_TCON_G203_31),
};

void sp7350_crtc_handle_vblank(struct sp7350_crtc *crtc)
{
	DRM_DEBUG_DRIVER("[TODO]\n");
	//crtc->t_vblank = ktime_get();
	//drm_crtc_handle_vblank(&crtc->base);
	//sp7350_crtc_handle_page_flip(crtc);
}

static irqreturn_t sp7350_crtc_irq_handler(int irq, void *data)
{
	struct sp7350_crtc *sp_crtc = data;
	//u32 stat = CRTC_READ(PV_INTSTAT);
	irqreturn_t ret = IRQ_NONE;

	DRM_DEBUG_DRIVER("[TODO]\n");

	//if (stat & PV_INT_VFP_START) {
		//CRTC_WRITE(PV_INTSTAT, PV_INT_VFP_START);
		sp7350_crtc_handle_vblank(sp_crtc);
		ret = IRQ_HANDLED;
	//}

	return ret;
}

/*
 * drm_crtc_helper_funcs
 */
static void sp7350_crtc_dmix_init(struct drm_crtc *crtc, struct drm_crtc_state *state)
{
	struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	u32 value;

	DRM_DEBUG_DRIVER("%s\n", __func__);

	/* DMIX setting FG_SEL
	 * L6   L5   L4   L3   L2   L1   BG
	 * OSD0 OSD1 OSD2 OSD3 ---- VPP0 PTG
	 */
	value = 0;
	value |= SP7350_DMIX_L6_FG_SEL(SP7350_DMIX_OSD0_SEL) |
		SP7350_DMIX_L5_FG_SEL(SP7350_DMIX_OSD1_SEL) |
		SP7350_DMIX_L4_FG_SEL(SP7350_DMIX_OSD2_SEL) |
		SP7350_DMIX_L3_FG_SEL(SP7350_DMIX_OSD3_SEL) |
		SP7350_DMIX_L2_FG_SEL(SP7350_DMIX_VPP1_SEL) |
		SP7350_DMIX_L1_FG_SEL(SP7350_DMIX_VPP0_SEL) |
		SP7350_DMIX_BG_FG_SEL(SP7350_DMIX_PTG_SEL);
	SP7350_CRTC_WRITE(DMIX_LAYER_CONFIG_0, value); //(default setting)

	/* DMIX setting MODE_SEL
	 * L6   L5   L4   L3   L2   L1   BG
	 * OSD0 OSD1 OSD2 OSD3 ---- VPP0 PTG
	 * (AlphaBlend / Transparent / Opacity setting)
	 */
	value = 0;
	value |= SP7350_DMIX_L6_MODE_SEL(SP7350_DMIX_TRANSPARENT) |
		SP7350_DMIX_L5_MODE_SEL(SP7350_DMIX_TRANSPARENT) |
		SP7350_DMIX_L4_MODE_SEL(SP7350_DMIX_TRANSPARENT) |
		SP7350_DMIX_L3_MODE_SEL(SP7350_DMIX_TRANSPARENT) |
		SP7350_DMIX_L2_MODE_SEL(SP7350_DMIX_TRANSPARENT) |
		SP7350_DMIX_L1_MODE_SEL(SP7350_DMIX_TRANSPARENT);
	SP7350_CRTC_WRITE(DMIX_LAYER_CONFIG_1, value); //All AlphaBlend

	/* DMIX PTG(default border pixel len=0 (BGC))
	 */
	value = 0;
	value |= SP7350_DMIX_PTG_BORDER_PATTERN(SP7350_DMIX_PTG_BORDER) |
		SP7350_DMIX_PTG_BORDER_PIX(SP7350_DMIX_PTG_BORDER_PIX_00);
	SP7350_CRTC_WRITE(DMIX_PTG_CONFIG_0, value); //BackGround + Border pix = 0

	/* DMIX PTG(BackGround Color Setting)
	 */
	value =0;
	value |= SP7350_DMIX_PTG_BLACK;
	SP7350_CRTC_WRITE(DMIX_PTG_CONFIG_2, value); //black for BackGround

	/* DMIX PIXEL_EN_SEL
	 */
	value =0;
	value |= SP7350_DMIX_SOURCE_SEL(SP7350_DMIX_TCON0_DMIX);
	SP7350_CRTC_WRITE(DMIX_SOURCE_SEL, value); //PIXEL_EN_SEL=TCON0(don't change)

}

/*
 * sp_tgen_para_dsi[x][y]
 * y = 0-1, TGEN width & height
 * y = 2-4, TGEN usr_mode & dtg_fps & dtg_fmt
 * y = 5-9, TGEN htt & hact & vtt & (vact+vbp+1) & vbp
 */
static const u32 sp_tgen_para_dsi[11][10] = {
	/* (w   h) (usr fps fmt) */
	{ 720,  480, 1, 0, 0,  858,  720,  525,  517, 36}, /* 480P 60Hz */
	{ 720,  576, 0, 1, 1,  864,  720,  625,  621, 44}, /* 576P 50Hz */
	//{1280,  720, 0, 0, 2, 1650, 1280,  750,  746, 25}, /* 720P 60Hz */
	{1280,  720, 1, 0, 0, 1650, 1280,  750,  746, 25}, /* 720P 60Hz */
	//{1920, 1080, 0, 0, 3, 2200, 1920, 1125, 1122, 41}, /* 1080P 60Hz */
	{1920, 1080, 1, 0, 0, 2200, 1920, 1125, 1122, 41}, /* 1080P 60Hz */
	//{  64,   64, 0, 0, 6,  360,   64,  100,   92, 29}, /* 64x64 60Hz */
	{ 480, 1280, 1, 0, 0,  620,  480, 1314, 1298, 17}, /* 480x1280 60Hz */
	/* (w   h) (usr - -)  htt   hact   vtt   vact+vbp+1 vbp*/
	{ 128,  128, 1, 0, 0,  360,  128,  150,  148, 19}, /* 128x128 60Hz */
	//{ 240,  320, 1, 0, 0,  683,  240,  364,  357, 36}, /* 240x320 60Hz */
	{ 240,  320, 1, 0, 0,  683,  240,  354,  347, 26}, /* 240x320 60Hz */
	{3840,   64, 1, 0, 0, 4608, 3840,  100,   92, 29}, /* 3840x64 60Hz */
	{3840, 2880, 1, 0, 0, 4608, 3840, 3200, 2920, 39}, /* 3840x2880 60Hz */
	{ 800,  480, 1, 0, 0,  873,  800,  510,  504, 23}, /* 800x480 60Hz */
	{1024,  600, 1, 0, 0, 1344, 1024,  635,  625, 24}  /* 1024x600 60Hz */
};

static void sp7350_crtc_tgen_init(struct drm_crtc *crtc, struct drm_crtc_state *state)
{
	struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	int i, time_cnt = 0;
	u32 value;

	DRM_DEBUG_DRIVER("%s\n", __func__);

	SP7350_CRTC_WRITE(TGEN_CONFIG, 0x00000000);
	SP7350_CRTC_WRITE(TGEN_USER_INT1_CONFIG, 0x0000000a);
	SP7350_CRTC_WRITE(TGEN_USER_INT2_CONFIG, 0x0000000a);

	for (i = 0; i < 11; i++) {
		if ((sp_tgen_para_dsi[i][0] == state->adjusted_mode.crtc_hdisplay) &&
			(sp_tgen_para_dsi[i][1] == state->adjusted_mode.crtc_vdisplay)) {
				time_cnt = i;
				break;
		}
	}

	DRM_DEBUG_DRIVER("%s (w h)(%d %d)\n", __func__,
		sp_tgen_para_dsi[time_cnt][0], sp_tgen_para_dsi[time_cnt][1]);

	/* TGEN timing init
	 */
	value = SP7350_CRTC_READ(TGEN_DTG_CONFIG);
	value &= ~(SP7350_TGEN_FORMAT | SP7350_TGEN_FPS | SP7350_TGEN_USER_MODE);
	value |= SP7350_TGEN_FORMAT_SET(sp_tgen_para_dsi[time_cnt][4]) |
			SP7350_TGEN_FPS_SET(sp_tgen_para_dsi[time_cnt][3]) |
			sp_tgen_para_dsi[time_cnt][2];
	SP7350_CRTC_WRITE(TGEN_DTG_CONFIG, value);

	SP7350_CRTC_WRITE(TGEN_DTG_TOTAL_PIXEL, sp_tgen_para_dsi[time_cnt][5]);
	SP7350_CRTC_WRITE(TGEN_DTG_DS_LINE_START_CD_POINT, sp_tgen_para_dsi[time_cnt][6]);
	SP7350_CRTC_WRITE(TGEN_DTG_TOTAL_LINE, sp_tgen_para_dsi[time_cnt][7]);
	SP7350_CRTC_WRITE(TGEN_DTG_FIELD_END_LINE, sp_tgen_para_dsi[time_cnt][8]);
	SP7350_CRTC_WRITE(TGEN_DTG_START_LINE, sp_tgen_para_dsi[time_cnt][9]);

	SP7350_CRTC_WRITE(TGEN_DTG_ADJUST1, 0x0000100d);
	SP7350_CRTC_WRITE(TGEN_SOURCE_SEL, 0x00000000);

	/* Write 1 to reset DTG timing bit
	 */
	SP7350_CRTC_WRITE(TGEN_RESET, 0x00000001);

}

/*
 * sp_tcon_para_dsi[x][y]
 * y = 0-1, TCON width & height
 * y = 2-11, TCON DE_H & Vsync_H & Hsync & DE_V & VTOP_V
 */
static const u32 sp_tcon_para_dsi[11][12] = {
	/* (w   h)    DE_H       Vsync_H     Hsync       DE_V        VTOP_V     */
	{ 720,  480,    0,  719,  850,  854,  850,  854,    0,    0,  524,    0}, /* 480P */
	{ 720,  576,    0,  719,  856,  856,  856,  860,    0,    0,  624,    0}, /* 576P */
	{1280,  720,    0, 1279, 1642, 1646, 1642, 1646,    0,    0,  749,    0}, /* 720P */
	{1920, 1080,    0, 1919, 2192, 2196, 2192, 2196,    0,    0, 1124,    0}, /* 1080P */
	//{  64,   64,    0,   63,  353,  353,  353,  356,    0,    0,   99,    0}, /* 64x64 */
	{ 480, 1280,    0,  479,  612,  616,  612,  616,    0,    0, 1313,    0}, /* 480x1280 */
	{ 128,  128,    0,  127,  352,  352,  352,  356,    0,    0,  149,    0}, /* 128x128 */
	//{ 240,  320,    0,  239,  675,  679,  675,  679,    0,    0,  363,    0}, /* 240x320 */
	{ 240,  320,    0,  239,  675,  679,  675,  679,    0,    0,  353,    0}, /* 240x320 */
	{3840,   64,    0, 3839, 4600, 4600, 4600, 4604,    0,    0,   99,    0}, /* 3840x64 */
	{3840, 2880,    0, 3839, 4600, 4600, 4600, 4604,    0,    0, 3199,    0}, /* 3840x2880 */
	{ 800,  480,    0,  799,  865,  869,  865,  869,    0,    0,  509,    0}, /* 800x480 */
	{1024,  600,    0, 1023, 1336, 1336, 1336, 1340,    0,    0,  634,    0}  /* 1024x600 */
};

/*
 * sp_tcon_tpg_para_dsi[x][y]
 * y = 0-1, TCON width & height
 * y = 2-9, TCON Hstep & Vstep & Hcnt & Vcnt & Hact & Vact & A_LINE & DITHER
 */
static const u32 sp_tcon_tpg_para_dsi[11][10] = {
	/* (w   h)    Hstep Vstep Hcnt  Vcnt  Hact  Vact A_LINE DITHER */
	{ 720,  480,    4,    4,  857,  524,  719,  479,  35, 0x01}, /* 480P */
	{ 720,  576,    4,    4,  863,  624,  719,  575,  17, 0x41}, /* 576P */
	{1280,  720,    4,    4, 1649,  749, 1279,  719,  24, 0x41}, /* 720P */
	{1920, 1080,    4,    4, 2199, 1124, 1919, 1079,  40, 0x01}, /* 1080P */
	//{  64,   64,    4,    4,  359,   99,   63,   63,  17, 0xC1}, /* 64x64 */
	{ 480, 1280,    4,    4,  619, 1313,  479, 1279,  16, 0x01}, /* 480x1280 */
	{ 128,  128,    4,    4,  359,  149,  127,  127,  17, 0x49}, /* 128x128 */
	{ 240,  320,    4,    4,  682,  353,  239,  319,  25, 0x01}, /* 240x320 */
	{3840,   64,    4,    4, 4607,   99, 3839,   63,  17, 0x01}, /* 3840x64 */
	{3840, 2880,    4,    4, 4607, 3199, 3839, 2879,  17, 0x01}, /* 3840x2880 */
	{ 800,  480,    4,    4,  872,  509,  799,  479,  22, 0x01}, /* 800x480 */
	{1024,  600,    4,    4, 1343,  634, 1023,  599,  17, 0x01}  /* 1024x600 */
};

static void sp7350_crtc_tcon_init(struct drm_crtc *crtc, struct drm_crtc_state *state)
{
	struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	int i, time_cnt = 0;
	u32 value = 0;

	DRM_DEBUG_DRIVER("%s\n", __func__);

	SP7350_CRTC_WRITE(TCON_TCON0, 0x00008127);
	SP7350_CRTC_WRITE(TCON_TCON1, 0x00008011);
	SP7350_CRTC_WRITE(TCON_TCON2, 0x00000011); //don't care
	SP7350_CRTC_WRITE(TCON_TCON3, 0x00002002); //don't care
	SP7350_CRTC_WRITE(TCON_TCON4, 0x00000000); //fixed , don't change it
	SP7350_CRTC_WRITE(TCON_TCON5, 0x00000004); //don't care

	for (i = 0; i < 11; i++) {
		if ((sp_tcon_para_dsi[i][0] == state->adjusted_mode.crtc_hdisplay) &&
			(sp_tcon_para_dsi[i][1] == state->adjusted_mode.crtc_vdisplay)) {
				time_cnt = i;
				break;
		}
	}

	DRM_DEBUG_DRIVER("%s (w h)(%d %d)\n", __func__,
		sp_tcon_para_dsi[time_cnt][0], sp_tcon_para_dsi[time_cnt][1]);
	/*
	 * TCON H&V timing parameter
	 */
	SP7350_CRTC_WRITE(TCON_DE_HSTART, sp_tcon_para_dsi[time_cnt][2]); //DE_HSTART
	SP7350_CRTC_WRITE(TCON_DE_HEND, sp_tcon_para_dsi[time_cnt][3]); //DE_HEND

	SP7350_CRTC_WRITE(TCON_OEV_START, sp_tcon_para_dsi[time_cnt][4]); //TC_VSYNC_HSTART
	SP7350_CRTC_WRITE(TCON_OEV_END, sp_tcon_para_dsi[time_cnt][5]); //TC_VSYNC_HEND

	SP7350_CRTC_WRITE(TCON_HSYNC_START, sp_tcon_para_dsi[time_cnt][6]); //HSYNC_START
	SP7350_CRTC_WRITE(TCON_HSYNC_END, sp_tcon_para_dsi[time_cnt][7]); //HSYNC_END

	SP7350_CRTC_WRITE(TCON_DE_VSTART, sp_tcon_para_dsi[time_cnt][8]); //DE_VSTART
	SP7350_CRTC_WRITE(TCON_DE_VEND, sp_tcon_para_dsi[time_cnt][9]); //DE_VEND

	SP7350_CRTC_WRITE(TCON_STVU_START, sp_tcon_para_dsi[time_cnt][10]); //VTOP_VSTART
	SP7350_CRTC_WRITE(TCON_STVU_END, sp_tcon_para_dsi[time_cnt][11]); //VTOP_VEND

	/*
	 * TPG(Test Pattern Gen) parameter
	 */
	SP7350_CRTC_WRITE(TCON_TPG_HCOUNT, sp_tcon_tpg_para_dsi[time_cnt][4]);
	value = 0;
	value |= (sp_tcon_tpg_para_dsi[time_cnt][2] << 12) | sp_tcon_tpg_para_dsi[time_cnt][5];
	SP7350_CRTC_WRITE(TCON_TPG_VCOUNT, value);
	SP7350_CRTC_WRITE(TCON_TPG_HACT_COUNT, sp_tcon_tpg_para_dsi[time_cnt][6]);
	value = 0;
	value |= (sp_tcon_tpg_para_dsi[time_cnt][3] << 12) | sp_tcon_tpg_para_dsi[time_cnt][7];
	SP7350_CRTC_WRITE(TCON_TPG_VACT_COUNT, value);
	SP7350_CRTC_WRITE(TCON_TPG_ALINE_START, sp_tcon_tpg_para_dsi[time_cnt][8]);
	//SP7350_CRTC_WRITE(TCON_DITHER_TVOUT, sp_tcon_tpg_para_dsi[time_cnt][9]);

}

static enum drm_mode_status sp7350_crtc_mode_valid(struct drm_crtc *crtc,
						const struct drm_display_mode *mode)
{
	struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	struct sp7350_crtc_tgen_timing_param *tgen_timing = &sp_crtc->tgen_timing;

	DRM_DEBUG_DRIVER("%s [TODO]\n", __func__);

	if (mode->hdisplay > 1920)
		return MODE_BAD_HVALUE;

	if (mode->vdisplay > 1080)
		return MODE_BAD_VVALUE;

	/* Generate tgen timing setting from drm_display_mode */
	tgen_timing->total_pixel = mode->htotal;
	tgen_timing->total_line  = mode->vtotal;
	tgen_timing->line_start_cd_point = mode->hdisplay;
	tgen_timing->active_start_line   = mode->vtotal - mode->vsync_start;
	tgen_timing->field_end_line      = tgen_timing->active_start_line + mode->vdisplay + 1;
	DRM_DEBUG_DRIVER("\nTGEN Timing Setting(%s):\n"
		 "   total_pixel=%d, total_line=%d, line_start_cd_point=%d\n"
		 "   active_start_line=%d, field_end_line=%d\n",
		 mode->name,
		 tgen_timing->total_pixel, tgen_timing->total_line, tgen_timing->line_start_cd_point,
		 tgen_timing->active_start_line, tgen_timing->field_end_line);

	return MODE_OK;
}

static int sp7350_crtc_atomic_check(struct drm_crtc *crtc,
					struct drm_crtc_state *state)
{
	struct sp7350_crtc_state *sp_state = to_sp7350_crtc_state(state);
	struct drm_connector *conn;
	struct drm_connector_state *conn_state;
	int i;

	/* TODO reference to vkms_crtc_atomic_check */
	DRM_DEBUG_DRIVER("%s [TODO]\n", __func__);

	for_each_new_connector_in_state(state->state, conn, conn_state, i) {
		if (conn_state->crtc != crtc)
			continue;

		sp_state->margins.left = conn_state->tv.margins.left;
		sp_state->margins.right = conn_state->tv.margins.right;
		sp_state->margins.top = conn_state->tv.margins.top;
		sp_state->margins.bottom = conn_state->tv.margins.bottom;
		break;
	}

	return 0;
}

static void sp7350_crtc_atomic_enable(struct drm_crtc *crtc,
					  struct drm_crtc_state *old_state)
{
	/* FIXME, NO vblank ??? */
	//drm_crtc_vblank_on(crtc);
	DRM_DEBUG_DRIVER("%s [TODO]\n", __func__);

}

static void sp7350_crtc_atomic_disable(struct drm_crtc *crtc,
					   struct drm_crtc_state *old_state)
{
	/* FIXME, NO vblank ??? */
	//drm_crtc_vblank_off(crtc);
	DRM_DEBUG_DRIVER("%s [TODO]\n", __func__);

}

static void sp7350_crtc_atomic_begin(struct drm_crtc *crtc,
					 struct drm_crtc_state *old_crtc_state)
{
	/* TODO reference to vkms_crtc_atomic_begin */
	DRM_DEBUG_DRIVER("%s\n", __func__);

	sp7350_crtc_dmix_init(crtc, old_crtc_state);
	sp7350_crtc_tgen_init(crtc, old_crtc_state);
	sp7350_crtc_tcon_init(crtc, old_crtc_state);

}

static void sp7350_crtc_atomic_flush(struct drm_crtc *crtc,
					 struct drm_crtc_state *old_crtc_state)
{
	/* TODO reference to vkms_crtc_atomic_flush */
	//struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	struct drm_pending_vblank_event *event = crtc->state->event;

	DRM_DEBUG_DRIVER("%s [TODO]\n", __func__);

	if (event) {
		crtc->state->event = NULL;

		spin_lock_irq(&crtc->dev->event_lock);
		if (drm_crtc_vblank_get(crtc) == 0)
			drm_crtc_arm_vblank_event(crtc, event);
		else
			drm_crtc_send_vblank_event(crtc, event);
		spin_unlock_irq(&crtc->dev->event_lock);
	}
}

static const struct drm_crtc_funcs sp7350_crtc_funcs = {
	.destroy	= drm_crtc_cleanup,
	.set_config	= drm_atomic_helper_set_config,
	.page_flip	= drm_atomic_helper_page_flip,
	.reset		= drm_atomic_helper_crtc_reset,
	.atomic_duplicate_state	= drm_atomic_helper_crtc_duplicate_state,
	.atomic_destroy_state	= drm_atomic_helper_crtc_destroy_state,
};

static const struct drm_crtc_helper_funcs sp7350_crtc_helper_funcs = {
	.mode_valid 	= sp7350_crtc_mode_valid,
	.atomic_check	= sp7350_crtc_atomic_check,
	.atomic_begin	= sp7350_crtc_atomic_begin,
	.atomic_flush	= sp7350_crtc_atomic_flush,
	.atomic_enable	= sp7350_crtc_atomic_enable,
	.atomic_disable	= sp7350_crtc_atomic_disable,
};

static void sp7350_set_crtc_possible_masks(struct drm_device *drm,
					   struct drm_crtc *crtc)
{
	struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	const enum sp7350_encoder_type *encoder_types = sp_crtc->encoder_types;
	struct drm_encoder *encoder;

	drm_for_each_encoder(encoder, drm) {
		struct sp7350_encoder *sp_encoder;
		int i;

		if (encoder->encoder_type == DRM_MODE_ENCODER_VIRTUAL)
			continue;

		sp_encoder = to_sp7350_encoder(encoder);
		for (i = 0; i < SP7350_DRM_ENCODER_TYPE_MAX; i++) {
			if (sp_encoder->type == encoder_types[i]) {
				sp_encoder->clock_select = i;
				encoder->possible_crtcs |= drm_crtc_mask(crtc);
				break;
			}
		}
	}
}

int sp7350_crtc_init(struct drm_device *drm, struct sp7350_crtc *sp7350_crtc,
		  const struct drm_crtc_funcs *crtc_funcs,
		  const struct drm_crtc_helper_funcs *crtc_helper_funcs)
{
	struct device_node *port;
	//struct sp7350_dev *sp_dev = to_sp7350_dev(drm);
	//struct sp7350_crtc *sp_crtc = to_sp7350_crtc(crtc);
	struct drm_crtc *crtc = &sp7350_crtc->base;
	struct drm_plane *primary_plane;
	struct drm_plane *media_plane;
	struct drm_plane *overlay_plane1;
	struct drm_plane *overlay_plane2;
	struct drm_plane *cursor_plane;
	int ret;

	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "of_get_child_by_name\n");
	port = of_get_child_by_name(sp7350_crtc->pdev->dev.of_node, "port");
	if (!port) {
		DRM_DEV_ERROR(drm->dev, "no port node found in %p\n", sp7350_crtc->pdev->dev.of_node);
		return -EINVAL;
	}
	of_node_put(port);
	crtc->port = port;

	/* init plane for primary_plane */
	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "sp7350_plane_init (primary_plane)\n");
	primary_plane = sp7350_plane_init(drm, DRM_PLANE_TYPE_PRIMARY, SP7350_DRM_LAYER_TYPE_OSD3);
	if (IS_ERR(primary_plane)) {
		return PTR_ERR(primary_plane);
	}

	/* init plane for cursor_plane */
	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "sp7350_plane_init (cursor_plane)\n");
	cursor_plane = sp7350_plane_init(drm, DRM_PLANE_TYPE_CURSOR, SP7350_DRM_LAYER_TYPE_OSD0);
	if (IS_ERR(cursor_plane)) {
		return PTR_ERR(cursor_plane);
	}

	/* init plane for media_plane */
	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "sp7350_plane_init (media_plane)\n");
	media_plane = sp7350_plane_init(drm, DRM_PLANE_TYPE_OVERLAY, SP7350_DRM_LAYER_TYPE_VPP0);
	if (IS_ERR(media_plane)) {
		return PTR_ERR(media_plane);
	}
	/* init plane for overlay_plane1 */
	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "sp7350_plane_init (overlay_plane1)\n");
	overlay_plane1 = sp7350_plane_init(drm, DRM_PLANE_TYPE_OVERLAY, SP7350_DRM_LAYER_TYPE_OSD2);
	if (IS_ERR(overlay_plane1)) {
		return PTR_ERR(overlay_plane1);
	}
	/* init plane for overlay_plane2 */
	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "sp7350_plane_init (overlay_plane2)\n");
	overlay_plane2 = sp7350_plane_init(drm, DRM_PLANE_TYPE_OVERLAY, SP7350_DRM_LAYER_TYPE_OSD1);
	if (IS_ERR(overlay_plane2)) {
		return PTR_ERR(overlay_plane2);
	}

	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "drm_crtc_init_with_planes\n");
	ret = drm_crtc_init_with_planes(drm, crtc, primary_plane, cursor_plane,
					crtc_funcs, NULL);

	DRM_DEV_DEBUG_DRIVER(&sp7350_crtc->pdev->dev, "drm_crtc_helper_add\n");
	drm_crtc_helper_add(crtc, crtc_helper_funcs);

	return ret;
}

static int sp7350_crtc_bind(struct device *dev, struct device *master, void *data)
{
	struct platform_device *pdev = to_platform_device(dev);
	struct drm_device *drm = dev_get_drvdata(master);
	struct sp7350_dev *sp_dev = to_sp7350_dev(drm);
	struct sp7350_crtc *sp_crtc;
	struct drm_crtc *crtc;
	struct resource *res;
	int ret;

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "start\n");

	sp_crtc = devm_kzalloc(dev, sizeof(*sp_crtc), GFP_KERNEL);
	if (!sp_crtc)
		return -ENOMEM;

	crtc = &sp_crtc->base;

	sp_crtc->pdev = pdev;

	/*
	 * get disp reg base (G185 - G203)
	 */
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "devm_platform_get_and_ioremap_resource\n");
	sp_crtc->regs = devm_platform_get_and_ioremap_resource(sp_crtc->pdev, 0, &res);
	if (IS_ERR(sp_crtc->regs))
		return dev_err_probe(&pdev->dev, PTR_ERR(sp_crtc->regs), "reg base not found\n");

	sp_dev->crtc_regs = sp_crtc->regs;

	/*
	 * VPP Layer debugfs init
	 */
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "debugfs init for regset\n");
	sp_crtc->regset_g185.base = sp_crtc->regs + (SP7350_REG_OFFSET_IMGREAD_G185 << 7);
	sp_crtc->regset_g185.regs = crtc_regs_g185;
	sp_crtc->regset_g185.nregs = ARRAY_SIZE(crtc_regs_g185);

	sp_crtc->regset_g186.base = sp_crtc->regs + (SP7350_REG_OFFSET_VSCL_G186 << 7);
	sp_crtc->regset_g186.regs = crtc_regs_g186;
	sp_crtc->regset_g186.nregs = ARRAY_SIZE(crtc_regs_g186);

	sp_crtc->regset_g187.base = sp_crtc->regs + (SP7350_REG_OFFSET_VSCL_G187 << 7);
	sp_crtc->regset_g187.regs = crtc_regs_g187;
	sp_crtc->regset_g187.nregs = ARRAY_SIZE(crtc_regs_g187);

	sp_crtc->regset_g188.base = sp_crtc->regs + (SP7350_REG_OFFSET_VPOST_G188 << 7);
	sp_crtc->regset_g188.regs = crtc_regs_g188;
	sp_crtc->regset_g188.nregs = ARRAY_SIZE(crtc_regs_g188);

	/*
	 * OSD Layer debugfs init
	 */
	sp_crtc->regset_g189.base = sp_crtc->regs + (SP7350_REG_OFFSET_OSD0_G189 << 7);
	sp_crtc->regset_g189.regs = crtc_regs_g189;
	sp_crtc->regset_g189.nregs = ARRAY_SIZE(crtc_regs_g189);

	sp_crtc->regset_g190.base = sp_crtc->regs + (SP7350_REG_OFFSET_OSD1_G190 << 7);
	sp_crtc->regset_g190.regs = crtc_regs_g190;
	sp_crtc->regset_g190.nregs = ARRAY_SIZE(crtc_regs_g190);

	sp_crtc->regset_g191.base = sp_crtc->regs + (SP7350_REG_OFFSET_OSD2_G191 << 7);
	sp_crtc->regset_g191.regs = crtc_regs_g191;
	sp_crtc->regset_g191.nregs = ARRAY_SIZE(crtc_regs_g191);

	sp_crtc->regset_g192.base = sp_crtc->regs + (SP7350_REG_OFFSET_OSD3_G192 << 7);
	sp_crtc->regset_g192.regs = crtc_regs_g192;
	sp_crtc->regset_g192.nregs = ARRAY_SIZE(crtc_regs_g192);

	sp_crtc->regset_g193.base = sp_crtc->regs + (SP7350_REG_OFFSET_GPOST0_G193 << 7);
	sp_crtc->regset_g193.regs = crtc_regs_g193;
	sp_crtc->regset_g193.nregs = ARRAY_SIZE(crtc_regs_g193);

	sp_crtc->regset_g194.base = sp_crtc->regs + (SP7350_REG_OFFSET_GPOST1_G194 << 7);
	sp_crtc->regset_g194.regs = crtc_regs_g194;
	sp_crtc->regset_g194.nregs = ARRAY_SIZE(crtc_regs_g194);

	sp_crtc->regset_g195.base = sp_crtc->regs + (SP7350_REG_OFFSET_GPOST2_G195 << 7);
	sp_crtc->regset_g195.regs = crtc_regs_g195;
	sp_crtc->regset_g195.nregs = ARRAY_SIZE(crtc_regs_g195);

	sp_crtc->regset_g196.base = sp_crtc->regs + (SP7350_REG_OFFSET_GPOST3_G196 << 7);
	sp_crtc->regset_g196.regs = crtc_regs_g196;
	sp_crtc->regset_g196.nregs = ARRAY_SIZE(crtc_regs_g196);

	/*
	 * TGEN debugfs init
	 */
	sp_crtc->regset_g197.base = sp_crtc->regs + (SP7350_REG_OFFSET_TGEN_G197 << 7);
	sp_crtc->regset_g197.regs = crtc_regs_g197;
	sp_crtc->regset_g197.nregs = ARRAY_SIZE(crtc_regs_g197);
	/*
	 * DMIX debugfs init
	 */
	sp_crtc->regset_g198.base = sp_crtc->regs + (SP7350_REG_OFFSET_DMIX_G198 << 7);
	sp_crtc->regset_g198.regs = crtc_regs_g198;
	sp_crtc->regset_g198.nregs = ARRAY_SIZE(crtc_regs_g198);

	/*
	 * TCON debugfs init
	 */
	sp_crtc->regset_g199.base = sp_crtc->regs + (SP7350_REG_OFFSET_TCON_G199 << 7);
	sp_crtc->regset_g199.regs = crtc_regs_g199;
	sp_crtc->regset_g199.nregs = ARRAY_SIZE(crtc_regs_g199);

	sp_crtc->regset_g200.base = sp_crtc->regs + (SP7350_REG_OFFSET_TCON_G200 << 7);
	sp_crtc->regset_g200.regs = crtc_regs_g200;
	sp_crtc->regset_g200.nregs = ARRAY_SIZE(crtc_regs_g200);

	sp_crtc->regset_g201.base = sp_crtc->regs + (SP7350_REG_OFFSET_TCON_G201 << 7);
	sp_crtc->regset_g201.regs = crtc_regs_g201;
	sp_crtc->regset_g201.nregs = ARRAY_SIZE(crtc_regs_g201);

	sp_crtc->regset_g202.base = sp_crtc->regs + (SP7350_REG_OFFSET_TCON_G202_RESERVED << 7);
	sp_crtc->regset_g202.regs = crtc_regs_g202;
	sp_crtc->regset_g202.nregs = ARRAY_SIZE(crtc_regs_g202);

	sp_crtc->regset_g203.base = sp_crtc->regs + (SP7350_REG_OFFSET_TCON_G203 << 7);
	sp_crtc->regset_g203.regs = crtc_regs_g203;
	sp_crtc->regset_g203.nregs = ARRAY_SIZE(crtc_regs_g203);

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "sp7350_crtc_init\n");
	ret = sp7350_crtc_init(drm, sp_crtc,
		&sp7350_crtc_funcs, &sp7350_crtc_helper_funcs);
	if (ret)
		return ret;

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "sp7350_set_crtc_possible_masks\n");
	sp7350_set_crtc_possible_masks(drm, crtc);

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "devm_request_irq\n");
	ret = devm_request_irq(dev, platform_get_irq(pdev, 0),
			       sp7350_crtc_irq_handler,
			       IRQF_SHARED,
			       "sp7350 crtc", sp_crtc);
	if (ret)
		goto err_destroy_planes;

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "platform_set_drvdata\n");
	platform_set_drvdata(pdev, sp_crtc);
	
	sp7350_debugfs_add_regset32(drm, "regs_g185", &sp_crtc->regset_g185);
	sp7350_debugfs_add_regset32(drm, "regs_g186", &sp_crtc->regset_g186);
	sp7350_debugfs_add_regset32(drm, "regs_g187", &sp_crtc->regset_g187);
	sp7350_debugfs_add_regset32(drm, "regs_g188", &sp_crtc->regset_g188);
	sp7350_debugfs_add_regset32(drm, "regs_g189", &sp_crtc->regset_g189);
	sp7350_debugfs_add_regset32(drm, "regs_g190", &sp_crtc->regset_g190);
	sp7350_debugfs_add_regset32(drm, "regs_g191", &sp_crtc->regset_g191);
	sp7350_debugfs_add_regset32(drm, "regs_g192", &sp_crtc->regset_g192);
	sp7350_debugfs_add_regset32(drm, "regs_g193", &sp_crtc->regset_g193);
	sp7350_debugfs_add_regset32(drm, "regs_g194", &sp_crtc->regset_g194);
	sp7350_debugfs_add_regset32(drm, "regs_g195", &sp_crtc->regset_g195);
	sp7350_debugfs_add_regset32(drm, "regs_g196", &sp_crtc->regset_g196);
	sp7350_debugfs_add_regset32(drm, "regs_g197", &sp_crtc->regset_g197);
	sp7350_debugfs_add_regset32(drm, "regs_g198", &sp_crtc->regset_g198);
	sp7350_debugfs_add_regset32(drm, "regs_g199", &sp_crtc->regset_g199);
	sp7350_debugfs_add_regset32(drm, "regs_g200", &sp_crtc->regset_g200);
	sp7350_debugfs_add_regset32(drm, "regs_g201", &sp_crtc->regset_g201);
	sp7350_debugfs_add_regset32(drm, "regs_g202", &sp_crtc->regset_g202);
	sp7350_debugfs_add_regset32(drm, "regs_g203", &sp_crtc->regset_g203);

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "done\n");

	return 0;

err_destroy_planes:
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "irq err\n");
	//list_for_each_entry_safe(destroy_plane, temp,
	//			 &drm->mode_config.plane_list, head) {
	//	if (destroy_plane->possible_crtcs == drm_crtc_mask(crtc))
	//	    destroy_plane->funcs->destroy(destroy_plane);
	//}

	return ret;
}

static void sp7350_crtc_unbind(struct device *dev, struct device *master,
			       void *data)
{
	struct platform_device *pdev = to_platform_device(dev);
	//struct drm_device *drm = dev_get_drvdata(master);
	struct sp7350_crtc *sp_crtc = dev_get_drvdata(dev);

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "drm_crtc_cleanup\n");
	drm_crtc_cleanup(&sp_crtc->base);

	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "platform_set_drvdata\n");
	platform_set_drvdata(pdev, NULL);
}

static const struct component_ops sp7350_crtc_ops = {
	.bind   = sp7350_crtc_bind,
	.unbind = sp7350_crtc_unbind,
};

static int sp7350_crtc_dev_probe(struct platform_device *pdev)
{
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "component_add\n");

	return component_add(&pdev->dev, &sp7350_crtc_ops);
}

static int sp7350_crtc_dev_remove(struct platform_device *pdev)
{
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "component_del\n");

	component_del(&pdev->dev, &sp7350_crtc_ops);
	return 0;
}

static int sp7350_crtc_dev_suspend(struct platform_device *pdev, pm_message_t state)
{
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "[TODO]\n");
	return 0;
}

static int sp7350_crtc_dev_resume(struct platform_device *pdev)
{
	DRM_DEV_DEBUG_DRIVER(&pdev->dev, "[TODO]\n");
	return 0;
}

static const struct of_device_id sp7350_crtc_dt_match[] = {
	{ .compatible = "sunplus,sp7350-crtc0" },
	{}
};

struct platform_driver sp7350_crtc_driver = {
	.probe   = sp7350_crtc_dev_probe,
	.remove  = sp7350_crtc_dev_remove,
	.suspend = sp7350_crtc_dev_suspend,
	.resume  = sp7350_crtc_dev_resume,
	.driver  = {
		.name = "sp7350_crtc",
		.of_match_table = sp7350_crtc_dt_match,
	},
};
