# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (C) Sunplus Co., Ltd. 2024
%YAML 1.2
---
$id: http://devicetree.org/schemas/nvmem/sunplus,sp7350-ocotp.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: On-Chip OTP Memory for Sunplus SP7350

maintainers:
  - Vincent Shih <vincent.shih@sunplus.com>

allOf:
  - $ref: nvmem.yaml#

properties:
  compatible:
    const: sunplus,sp7350-ocotp

  reg:
    maxItems: 3

  reg-names:
    items:
      - const: hb_gpio
      - const: otprx
      - const: otp_key

  clocks:
    maxItems: 1

  resets:
    maxItems: 1

  thermal-calibration:
    type: object
    description: thermal calibration values

  mac-address:
    type: object
    description: MAC address of ethernet

  disconnect-voltage:
    type: object
    description: disconnect voltages of usb2 port

required:
  - compatible
  - reg
  - reg-names
  - clocks
  - resets

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/clock/sp-sp7350.h>
    #include <dt-bindings/reset/sp-sp7350.h>

    soc {
      #address-cells = <2>;
      #size-cells = <2>;

      otp0: otp@f8802380 {
        compatible = "sunplus,sp7350-ocotp";
        reg = <0x0 0xf8802380 0x0 0x60>, <0x0 0xf8802400 0x0 0x80>,
                <0x0 0xf8802480 0x0 0x18>;
        reg-names = "hb_gpio", "otprx", "otp_key";
        clocks = <&clkc OTPRX>;
        resets = <&rstc RST_OTPRX>;
        #address-cells = <1>;
        #size-cells = <1>;
        therm_calib: therm_calib@9 {
          reg = <0x9 0x3>;
        };
        mac_addr: mac-address@16 {
          reg = <0x16 0x6>;
          sunplus,byte-swap;
        };
        disc_vol: disc_vol@2d {
          reg = <0x2d 0x1>;
        };
      };
    };
...
